# 14 리액트에서 발생하는 크로스 사이트 스크립팅(XSS)

## 14.1 dangerouslySetInnerHTML prop
> ### You will learn 📝
>
>- 14.1.1 dangerouslySetInnerHTML prop
>- 14.1.2 useRef를 활용한 직접 삽입
>- 14.1.3 리액트에서 XSS 문제를 피하는 방법

### Q1. XSS가 무엇인지와 이로 인해 발생할 수 있는 위험 사례를 소개해주세요. (주희)
- XSS는 개발자가 아닌 사람이 자신이 원하는 악성 스크립트가 동작하도록 삽입하여 실행하는 것
- 사용자의 개인 정보를 탈취하거나 기존 웹사이트의 데이터를 변조하는 것

### Q2. XSS 이슈를 피하는 방법은? (주희)
- 사용자가 업로드하는 컨텐츠를 확인하고 escape 과정을 거친다.
- 컨텐츠를 보여줄 때에도 escape 과정을 거친다.
- escape
  - 외부 라이브러리를 사용하거나 직접 구현할 수도 있다.

### Q3. `dangerouslySetInnerHTML`에 'dangerously'가 붙은 이유에 대해, '위험하지 않게' HTML을 삽입하는 방법과 비교하여 설명해주세요. (채림)
- sanitize 과정을 거치지 않고 받은 문자열을 그대로 사용하기 때문에 제한이 없어서 위험한 것
- 일반적인 방법으로 HTLM 태그 사이 `{}` 안에 문자열을 넣는 방식을 쓰면, 리액트가 이스케이프 작업을 거치므로 안전하다.

### Q4. 리액트에서 기본적으로 이스케이프 작업을 해주는 두 가지 경우는 어떤 게 있을까요? (유진)
- 일반적인 방법으로 HTLM 태그 사이 `{}` 안에 문자열을 넣는 방식을 쓰면, 리액트가 이스케이프 작업을 거치므로 안전하다.
  - HTML에 표시되는 textContent
- HTML의 속성 값에 대해서도 기본적으로 이스케이프 작업을 거친다.

<br/>

---

## 14.2 getServerSideProps와 서버 컴포넌트를 주의하자
### Q1. `getServerSideProps`가 보안 관점에서 위험한 이유가 무엇인가요? (채림)
- 클라이언트에 충분한 보안처리가 되어있지 않으면, 노출될 경우 위험한 정보를 서버에서 내려줄 수 있음
- 반환하는 props가 HTML에 전부 기록되는데, 이렇게 되면 전역변수로 접근할 수 있게 되어 위험할 수 있음

<br/>

---

## 14.3 `<a>` 태그의 값에 적절한 제한을 둬야 한다

<br/>

---

## 14.4 HTTP 보안 헤더 설정하기
> ### You will learn 📝
>
>- 14.4.1 Strict-Transport-Security
>- 14.4.2 X-XSS-Protection
>- 14.4.3 X-Frame-Options
>- 14.4.4 Permissions-Policy
>- 14.4.5 X-Content-Type-Options
>- 14.4.6 Referrer-Policy
>- 14.4.7 Content-Security-Policy
>- 14.4.8 보안 헤더 설정하기
>- 14.4.9 보안 헤더 확인하기

### Q1. HTTP 보안 헤더란? (주희)
- 브라우저가 렌더링하는 내용과 관련된 보안 취약점을 미연에 방지하기 위해 브라우저와 함께 작동하는 헤더
- HTTP 요청을 보낼 때 제한하는 정책에 대한 헤더

### Q2. 채림이는 사용자가 북마크한 웹사이트를 한데 모아 보여주는 웹사이트를 만들고 있는데, 일부 웹사이트가 제대로 표시되지 않는 문제가 발생했습니다. 
원인과 해결책에 대해 설명해주세요. (채림)
- iframe을 렌더링한 경우라면, 렌더링하려는 페이지에서 X-Frame-Options 설정으로 접근을 불가하게 막았을 수 있다.
- 방법 1
  - 프록시로, 해당 웹사이트에 대한 요청을 프록시를 거치게 하고, 프록시 서버에서 헤더를 변경해서 우리 서버에서 요청한다.
  - 프록시 서버는 렌더링 목적이 아니므로 렌더를 막은 것을 회피할 수 있다.
- 방법 2
  - 크롬 익스텐션 기능 중 헤더를 바꿀 수 있는 기능이 있어서, 이 기능을 활용한 크롬 익스텐션을 설치한 경우에는 렌더링이 가능하다.

<br/>

---

## 14.5 취약점이 있는 패키지의 사용을 피하자

<br/>

---

## 14.6 OWASP Top 10

