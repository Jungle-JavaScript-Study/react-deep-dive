# 4.3 Next.js 톺아보기

> ### You will learn 📝
>- 4.3.1 Next.js란?
>- 4.3.2 Next.js 시작하기
>- 4.3.3 Data Fetching
>- 4.3.4 스타일 적용하기
>- 4.3.5 _app.tsx 응용하기
>- 4.3.6 next.config.js 살펴보기

---

### Q1. _document.tsx는 무엇을 하는 곳이며, _app.tsx와의 차이점은 무엇일까요? (경민)
- _document.tsx: 애플리케이션의 html을 초기화 하는 곳, _app.tsx는 애플케이션 전체를 초기화 하는 곳
- _app.tsx는 상황에 따라 서버나 클라이언트에서 실행될 수 있기 때문에 서버에서만 실행되는 _document.tsx와는 차이가 있다
- html이나 body에 DOM 속성을 추가하고 싶다면 _document.tsx를 사용
- next.js에 존재하는 두 가지 헤드 중 next/document에서 제공하는 헤드는 브라우저의 헤드 태그와 동일한 역할을 하지만 _document.tsx에서만 사용할 수 있고, next/head에서 제공하는 헤드는 일반 페이지에서도 사용할 수 있으며 seo나 타이틀 정보 등을 담을 수 있다. 따라서 공통 제목이 필요할 때는 _app.tsx를 사용하고 페이지별 제목이 필요할 때는 next/head의 헤드 태그를 사용한다.
- getServersideProps, getStaticProps 등의 서버에서 사용가능한 데이터 불러오기 함수는 _document.tsx에서 사용할 수 없다.

### Q2. 다음 파일들에 접근할 수 있는 url 경로와 서버 사이드에서 받을 수 있는 변수를 설명해 주세요: (유진)
#### (1) pages/hi/[props].tsx
#### (2) pages/hello/index.tsx 와 pages/hello.tsx
#### (3) pages/hello/[greeting].tsx
#### (4) pages/hi/[...props].tsx

- 1, 3의 대괄호는 해당 자리에 어떠한 문자든 올 수 있다는 뜻이므로 props나 greeting 자리에 어떤 문자가 들어가도 유효한 주소가 된다. 이 때 props 자리에 hi/welcome.tsx라는 이미 정의된 주소가 들어가면 그게 우선시된다. 
- 4번의 ...는 javascript의 전개 연산자와 작동이 동일하여 hi의 하위에 있는 모든 주소가 해당 위치에 들어갈 수 있으며, depth에 상관없이 모두 들어갈 수 있다(ex. hi/hello/welcome) 이 때 hi/hello/welcome이 배열의 형태로 전달된다. hi/1으로 들어가도 배열의 형태로 들어간다
- 숫자를 넣는다면 숫자로 형변환되지 않고 string 취급된다.
- 2번은 둘 다 hello라는 주소로 접근이 가능하지만 둘 다 존재할 때는 기본적으로 index.tsx가 우선시된다. 또한 서버사이드에서는 props로 값을 전달받을 수 없다.

### Q3. 페이지에 `getServerSideProps`가 있을 때와 없을 때의 차이점은 무엇인가요?
#### +) `typeof window === 'undefined' : '서버' : '클라이언트'의 실행 결과는 무엇인가요?

### Q4. 다음 코드는 웹서비스에 최초 접근 시에만 실행하고 싶은 `checkUserAgent`이 포함된 _app.tsx 파일의 일부입니다.
```js
MyApp.getInitialProps = async (context: AppContext) => {
  const appProps = await App.getInitialProps(context)

  if (
    context.ctx.req && // 조건 (1)
    !context.ctx.req.url?.startsWith('/_next') && // 조건 (2)
    !['/500', '/404', '/_error'].includes(ctx.router.pathname) // 조건 (3)
  ) {
    checkUserAgent();
  }

  return appProps
}
```
조건 (1), (2), (3)의 의미가 무엇인지 설명해 주세요.
