# 4.3 Next.js í†ºì•„ë³´ê¸°

> ### You will learn ğŸ“
>- 4.3.1 Next.jsë€?
>- 4.3.2 Next.js ì‹œì‘í•˜ê¸°
>- 4.3.3 Data Fetching
>- 4.3.4 ìŠ¤íƒ€ì¼ ì ìš©í•˜ê¸°
>- 4.3.5 _app.tsx ì‘ìš©í•˜ê¸°
>- 4.3.6 next.config.js ì‚´í´ë³´ê¸°

---

### Q1. _document.tsxëŠ” ë¬´ì—‡ì„ í•˜ëŠ” ê³³ì´ë©°, _app.tsxì™€ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œìš”? (ê²½ë¯¼)
- _document.tsx: ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ htmlì„ ì´ˆê¸°í™” í•˜ëŠ” ê³³, _app.tsxëŠ” ì• í”Œì¼€ì´ì…˜ ì „ì²´ë¥¼ ì´ˆê¸°í™” í•˜ëŠ” ê³³
- _app.tsxëŠ” ìƒí™©ì— ë”°ë¼ ì„œë²„ë‚˜ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì„œë²„ì—ì„œë§Œ ì‹¤í–‰ë˜ëŠ” _document.tsxì™€ëŠ” ì°¨ì´ê°€ ìˆë‹¤
- htmlì´ë‚˜ bodyì— DOM ì†ì„±ì„ ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ _document.tsxë¥¼ ì‚¬ìš©
- next.jsì— ì¡´ì¬í•˜ëŠ” ë‘ ê°€ì§€ í—¤ë“œ ì¤‘ next/documentì—ì„œ ì œê³µí•˜ëŠ” í—¤ë“œëŠ” ë¸Œë¼ìš°ì €ì˜ í—¤ë“œ íƒœê·¸ì™€ ë™ì¼í•œ ì—­í• ì„ í•˜ì§€ë§Œ _document.tsxì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , next/headì—ì„œ ì œê³µí•˜ëŠ” í—¤ë“œëŠ” ì¼ë°˜ í˜ì´ì§€ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° seoë‚˜ íƒ€ì´í‹€ ì •ë³´ ë“±ì„ ë‹´ì„ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ê³µí†µ ì œëª©ì´ í•„ìš”í•  ë•ŒëŠ” _app.tsxë¥¼ ì‚¬ìš©í•˜ê³  í˜ì´ì§€ë³„ ì œëª©ì´ í•„ìš”í•  ë•ŒëŠ” next/headì˜ í—¤ë“œ íƒœê·¸ë¥¼ ì‚¬ìš©í•œë‹¤.
- getServersideProps, getStaticProps ë“±ì˜ ì„œë²„ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜ëŠ” _document.tsxì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

### Q2. ë‹¤ìŒ íŒŒì¼ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” url ê²½ë¡œì™€ ì„œë²„ ì‚¬ì´ë“œì—ì„œ ë°›ì„ ìˆ˜ ìˆëŠ” ë³€ìˆ˜ë¥¼ ì„¤ëª…í•´ ì£¼ì„¸ìš”: (ìœ ì§„)
#### (1) pages/hi/[props].tsx
#### (2) pages/hello/index.tsx ì™€ pages/hello.tsx
#### (3) pages/hello/[greeting].tsx
#### (4) pages/hi/[...props].tsx

- 1, 3ì˜ ëŒ€ê´„í˜¸ëŠ” í•´ë‹¹ ìë¦¬ì— ì–´ë– í•œ ë¬¸ìë“  ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ propsë‚˜ greeting ìë¦¬ì— ì–´ë–¤ ë¬¸ìê°€ ë“¤ì–´ê°€ë„ ìœ íš¨í•œ ì£¼ì†Œê°€ ëœë‹¤. ì´ ë•Œ props ìë¦¬ì— hi/welcome.tsxë¼ëŠ” ì´ë¯¸ ì •ì˜ëœ ì£¼ì†Œê°€ ë“¤ì–´ê°€ë©´ ê·¸ê²Œ ìš°ì„ ì‹œëœë‹¤. 
- 4ë²ˆì˜ ...ëŠ” javascriptì˜ ì „ê°œ ì—°ì‚°ìì™€ ì‘ë™ì´ ë™ì¼í•˜ì—¬ hiì˜ í•˜ìœ„ì— ìˆëŠ” ëª¨ë“  ì£¼ì†Œê°€ í•´ë‹¹ ìœ„ì¹˜ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆìœ¼ë©°, depthì— ìƒê´€ì—†ì´ ëª¨ë‘ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤(ex. hi/hello/welcome) ì´ ë•Œ hi/hello/welcomeì´ ë°°ì—´ì˜ í˜•íƒœë¡œ ì „ë‹¬ëœë‹¤. hi/1ìœ¼ë¡œ ë“¤ì–´ê°€ë„ ë°°ì—´ì˜ í˜•íƒœë¡œ ë“¤ì–´ê°„ë‹¤
- ìˆ«ìë¥¼ ë„£ëŠ”ë‹¤ë©´ ìˆ«ìë¡œ í˜•ë³€í™˜ë˜ì§€ ì•Šê³  string ì·¨ê¸‰ëœë‹¤.
- 2ë²ˆì€ ë‘˜ ë‹¤ helloë¼ëŠ” ì£¼ì†Œë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ë‘˜ ë‹¤ ì¡´ì¬í•  ë•ŒëŠ” ê¸°ë³¸ì ìœ¼ë¡œ index.tsxê°€ ìš°ì„ ì‹œëœë‹¤. ë˜í•œ ì„œë²„ì‚¬ì´ë“œì—ì„œëŠ” propsë¡œ ê°’ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ì—†ë‹¤.

---

### Q3. í˜ì´ì§€ì— `getServerSideProps`ê°€ ìˆì„ ë•Œì™€ ì—†ì„ ë•Œì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”? (ìœ ì§„)
#### +) `typeof window === 'undefined' : 'ì„œë²„' : 'í´ë¼ì´ì–¸íŠ¸'ì˜ ì‹¤í–‰ ê²°ê³¼ëŠ” ë¬´ì—‡ì¸ê°€ìš”?

### Q4. ë‹¤ìŒ ì½”ë“œëŠ” ì›¹ì„œë¹„ìŠ¤ì— ìµœì´ˆ ì ‘ê·¼ ì‹œì—ë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ì€ `checkUserAgent`ì´ í¬í•¨ëœ _app.tsx íŒŒì¼ì˜ ì¼ë¶€ì…ë‹ˆë‹¤. (ìœ ì§„)
```js
MyApp.getInitialProps = async (context: AppContext) => {
  const appProps = await App.getInitialProps(context)

  if (
    context.ctx.req && // ì¡°ê±´ (1)
    !context.ctx.req.url?.startsWith('/_next') && // ì¡°ê±´ (2)
    !['/500', '/404', '/_error'].includes(ctx.router.pathname) // ì¡°ê±´ (3)
  ) {
    checkUserAgent();
  }

  return appProps
}
```
ì¡°ê±´ (1), (2), (3)ì˜ ì˜ë¯¸ê°€ ë¬´ì—‡ì¸ì§€ ì„¤ëª…í•´ ì£¼ì„¸ìš”.

### Q5. getStaticPathsì™€ getStaticPropsëŠ” ì–´ë–¤ í˜ì´ì§€ì— ì‚¬ìš©í•˜ë‚˜ìš”? (ì£¼í¬)

### Q6. getServerSidePropsê°€ ì‹¤í–‰ë˜ëŠ” ì‹œì ì€ ì–¸ì œì¸ê°€ìš”? (ì£¼í¬)

### Q7. next.config.jsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì„¤ì •ë“¤ì…ë‹ˆë‹¤. ì„¤ëª…í•´ì£¼ì„¸ìš”. (ì£¼í¬)
#### (1) basePath
#### (2) swcMinify
#### (3) poweredByHeader
#### (4) redirects
#### (5) reactStrictMode
#### (6) assetPrefix

### Q8. Next.jsë¡œ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì„ ì‚¬ìš©í•´ì„œ ê°œë°œì„ í•˜ëŠ”ë° ìŠ¤íƒ€ì¼ì´ ì…í˜€ì§€ì§€ ì•Šì€ HTMLì´ ì ì‹œ ë™ì•ˆ ë³´ì´ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ í•´ê²°í•´ì•¼ í• ê¹Œìš”? (ê²½ë¯¼)

### Q9. ë‹¤ìŒ ë‚´ìš©ì„ _app.tsxì— ì¶”ê°€í•˜ê³  getInitialPropsê°€ ìˆëŠ” ê³³(/test/GIP)ì— ì²˜ìŒ ë°©ë¬¸í•˜ê³ , ê·¸ ë‹¤ìŒ <Link>ë¥¼ ì´ìš©í•´ì„œ getServerSidePropsê°€ ìˆëŠ” í˜ì´ì§€(/test/GSSP)ë¥¼ ë°©ë¬¸í•˜ê³ , ë‹¤ì‹œ <Link>ë¥¼ ì´ìš©í•´ì„œ ì›ë˜ ìˆë˜ /test/GIPì— ë°©ë¬¸, ê·¸ ë‹¤ìŒ ë˜ <Link>ë¥¼ ì´ìš©í•´ì„œ /test/GSSP ë¥¼ ë°©ë¬¸í–ˆìŠµë‹ˆë‹¤.

```js
MyApp.getInitialProps = async (context: AppContext) => {
  const appProps = await App.getInitialProps(context)
  const isServer = Boolean(context.ctx.req)
  console.log(
    `[${isServer ? 'ì„œë²„' : 'í´ë¼ì´ì–¸íŠ¸'}] ${context.router.pathname}ì—ì„œ ${context.ctx?.req?.url}ë¥¼ ìš”ì²­í•¨.`,
  )
  return appProps
}
```

ê·¸ë¬ë”ë‹ˆ ë¡œê·¸ê°€ ë‹¤ìŒ ìˆœì„œë¡œ ì°í˜”ëŠ”ë°ìš”.

- ë¡œê·¸: [ì„œë²„] /test/GIPì—ì„œ /test/GIPë¥¼ ìš”ì²­
- ë¡œê·¸: [ì„œë²„] /test/GSSPì—ì„œ /_next/data/XBY50vq6_LSP5vdU2XD5n/test/GSSP.jsonì„ ìš”ì²­
- ë¡œê·¸: [í´ë¼ì´ì–¸íŠ¸] /test/GSSPì—ì„œ undefinedë¥¼ ìš”ì²­
- ë¡œê·¸: [ì„œë²„] /test/GSSPì—ì„œ /_next/data/XBY50vq6_LSP5vdU2XD5n/test/GSSP.jsonì„ ìš”ì²­

ì´ê²ƒì´ ì˜ë¯¸í•˜ëŠ” ë°”ê°€ ë¬´ì—‡ì¸ì§€ ì„¤ëª…í•´ì£¼ì„¸ìš”. (ê²½ë¯¼)